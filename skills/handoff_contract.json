{
  "glossary": {
    "api_contract": "artifacts/contracts/latest/api_contract.json",
    "backend_coverage": "artifacts/backend/latest/contract_coverage.json",
    "bench_results": "artifacts/bench/latest/bench_results.json",
    "frontend_usage": "artifacts/frontend/latest/api_usage.json",
    "pipeline_result": "artifacts/pipeline/latest/pipeline_result.json",
    "template_check_report": "artifacts/template_check/latest/report.json",
    "test_gate_report": "artifacts/tests/latest/GateReport.md",
    "triage_payload": "artifacts/triage/latest/summary_payload.json"
  },
  "schema_version": "1.0",
  "steps": [
    {
      "command": "python -m skills template_select --spec <SPEC.md>",
      "consumes_outputs_from": [],
      "name": "template_select",
      "produced_outputs": [
        "artifacts/template_select/latest/template_choice.json",
        "artifacts/plan/template_choice.json"
      ],
      "required_inputs": [
        "spec_path"
      ],
      "strict_mode_effects": []
    },
    {
      "command": "python -m skills scaffold_verify --template <template_id> --port auto",
      "consumes_outputs_from": [
        "template_select"
      ],
      "name": "scaffold_verify",
      "produced_outputs": [
        "artifacts/scaffold_verify/latest/smoke.json",
        "artifacts/bootstrap/smoke.json"
      ],
      "required_inputs": [
        "template_id"
      ],
      "strict_mode_effects": []
    },
    {
      "command": "python -m skills plan_to_contracts --spec <SPEC.md>",
      "consumes_outputs_from": [
        "template_select"
      ],
      "name": "plan_to_contracts",
      "produced_outputs": [
        "artifacts/contracts/latest/api_contract.json",
        "artifacts/contracts/latest/TEST_PLAN.md",
        "artifacts/contracts/latest/GateReport.md"
      ],
      "required_inputs": [
        "spec_path"
      ],
      "strict_mode_effects": []
    },
    {
      "command": "python -m skills backend_build --contracts artifacts/contracts/latest/api_contract.json",
      "consumes_outputs_from": [
        "plan_to_contracts"
      ],
      "name": "backend_build",
      "produced_outputs": [
        "artifacts/backend/latest/contract_coverage.json",
        "artifacts/backend/latest/GateReport.md"
      ],
      "required_inputs": [
        "api_contract"
      ],
      "strict_mode_effects": [
        "future hook: escalate fuzzy required matches to fail"
      ]
    },
    {
      "command": "python -m skills frontend_bind --contracts-dir artifacts/contracts/latest [--strict]",
      "consumes_outputs_from": [
        "plan_to_contracts"
      ],
      "name": "frontend_bind",
      "produced_outputs": [
        "artifacts/frontend/latest/api_usage.json",
        "artifacts/frontend/latest/mock_data_report.json",
        "artifacts/frontend/latest/GateReport.md"
      ],
      "required_inputs": [
        "api_contract",
        "routes"
      ],
      "strict_mode_effects": [
        "expired exemptions become hard failures"
      ]
    },
    {
      "command": "python -m skills fullstack_test_harness [--network]",
      "consumes_outputs_from": [
        "plan_to_contracts",
        "frontend_bind",
        "backend_build"
      ],
      "name": "fullstack_test_harness",
      "produced_outputs": [
        "artifacts/tests/latest/ui_results.json",
        "artifacts/tests/latest/api_results.json",
        "artifacts/tests/latest/db_results.json",
        "artifacts/tests/latest/GateReport.md"
      ],
      "required_inputs": [
        "test_plan"
      ],
      "strict_mode_effects": [
        "future hook: strict skipped-test policy"
      ]
    },
    {
      "command": "python -m skills triage_and_patch --gate-report <GateReport.md>",
      "consumes_outputs_from": [
        "fullstack_test_harness",
        "backend_build",
        "frontend_bind"
      ],
      "name": "triage_and_patch",
      "produced_outputs": [
        "artifacts/triage/latest/root_cause.md",
        "artifacts/triage/latest/patch_plan.md",
        "artifacts/triage/latest/summary_payload.json"
      ],
      "required_inputs": [
        "gate_report_paths"
      ],
      "strict_mode_effects": []
    },
    {
      "command": "python -m skills pipeline --spec <SPEC.md> [--strict] [--triage-on-fail]",
      "consumes_outputs_from": [
        "template_select",
        "scaffold_verify",
        "plan_to_contracts",
        "backend_build",
        "frontend_bind",
        "fullstack_test_harness"
      ],
      "name": "pipeline",
      "produced_outputs": [
        "artifacts/pipeline/latest/pipeline_result.json",
        "artifacts/pipeline/latest/GateReport.md"
      ],
      "required_inputs": [
        "spec_path"
      ],
      "strict_mode_effects": [
        "propagates strict mode to frontend_bind"
      ]
    }
  ]
}
